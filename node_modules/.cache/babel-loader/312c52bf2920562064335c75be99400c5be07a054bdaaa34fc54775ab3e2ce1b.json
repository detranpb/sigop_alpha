{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport MyModal from '@/components/MyModal.vue';\nexport default {\n  components: {\n    MyModal\n  },\n  name: 'AppLogin',\n  data() {\n    return {\n      modalIsVisible: false,\n      modalMessage: \"Confirma operação?\",\n      usersDB: [],\n      isPrimeiroAcesso: true,\n      form: {\n        matricula: \"\",\n        senha: \"\"\n      },\n      novaSenha: 0\n    };\n  },\n  methods: {\n    onModalClose() {\n      this.modalSenhaVisible = false;\n    },\n    handleCloseModal() {\n      // console.log(\"Close ... \");\n      this.modalIsVisible = false;\n      this.modalMessage = \"x\";\n    },\n    handleAcceptModal() {\n      // console.log(\"Accept ... \");\n      this.modalIsVisible = false;\n      this.modalMessage = \"y\";\n    },\n    handleRejectModal() {\n      // console.log(\"Reject ... \");\n      this.modalIsVisible = false;\n      this.modalMessage = \"d\";\n    },\n    login() {\n      // console.log( 'login !!!' );\n\n      var mat = this.form.matricula;\n      var senha = this.form.senha;\n      // console.log( mat + senha );\n\n      var sendData = {\n        dados: {\n          entidade: 'usuario',\n          operacao: 'login',\n          objeto: {\n            matricula: mat,\n            cpf: senha\n          }\n        }\n      };\n      console.log(\"SEND Login request ||\" + JSON.stringify(sendData));\n      axios.post(this.$SERVICES_ENDPOINT_URL, sendData).then(response => {\n        console.log('-Response DATA == ' + JSON.stringify(response.data) + typeof response.data);\n        if (typeof response.data == 'object') {\n          var data = response.data;\n          /* console.log('-DATA == ' + JSON.stringify(  data )  );\r\n          /* console.log( \"MSG = \" + data.message + \"|| code= \" + data.code );*/\n          if (data.code == 0) {\n            console.log(\"Nome = \" + data.data.nome);\n            const nameParts = data.data.nome.split(' ');\n            const firstName = nameParts[0];\n            const lastName = nameParts[1];\n            var userObj = {\n              nome: firstName,\n              sobrenome: lastName,\n              matricula: data.data.matricula,\n              cpf: null\n            };\n            this.$store.commit('setUser', userObj);\n            this.$router.push('/home');\n          } else {\n            console.log(\"MSG = \" + data.message);\n            this.modalIsVisible = true;\n            this.modalMessage = response.data.message;\n          }\n        }\n        console.log('code:', response.data.code);\n      }).catch(error => {\n        this.error = error.message;\n      });\n\n      /* fetch('https://raw.githubusercontent.com/paulovfppiox/policiamento-assets/main/users.json')\r\n      .then(response => response.json())\r\n      .then(json => {\r\n          this.usersDB = json;\r\n          console.log( mat + \" ---- \" + senha );\r\n            var obj1 = {matricula: mat, senha: senha}\r\n          this.usersDB.push(obj1);\r\n          var x = this.usersDB.indexOf(obj1);\r\n          console.log( x );\r\n        });*/\n\n      // Aplica DELAY\n      /* var tempo = 0;\r\n      setTimeout(() => {\r\n          this.$router.push('/home');\r\n          console.log( tempo++ );\r\n      }, 5000);*/\n    },\n\n    register() {\n      console.log('registrar!!!');\n    }\n  }\n};","map":{"version":3,"names":["axios","MyModal","components","name","data","modalIsVisible","modalMessage","usersDB","isPrimeiroAcesso","form","matricula","senha","novaSenha","methods","onModalClose","modalSenhaVisible","handleCloseModal","handleAcceptModal","handleRejectModal","login","mat","sendData","dados","entidade","operacao","objeto","cpf","console","log","JSON","stringify","post","$SERVICES_ENDPOINT_URL","then","response","code","nome","nameParts","split","firstName","lastName","userObj","sobrenome","$store","commit","$router","push","message","catch","error","register"],"sources":["src/pages/AppLogin.vue"],"sourcesContent":["<template>\r\n    <main>\r\n    <!-- Add the style and icon you want using the String format -->\r\n    <!--<font-awesome-icon icon=\"fa-solid fa-user-secret\" /> -->\r\n\r\n    <b-row class=\"vh-100 vw-100 row-login\">\r\n      <b-col sm=\"5\" class=\"d-flex justify-content-center align-items-center left-login\">\r\n        <div class=\"col-8\">\r\n          <!-- <h2 class=\"text-center mb-5 title-login\"> Sistema de Gestão Operacional de Policiamento </h2> -->\r\n          <h4> Login </h4>\r\n          <b-form>\r\n            <b-form-group label=\"Matrícula\" label-for=\"email\">\r\n                <b-form-input\r\n                  id=\"matricula\"\r\n                  type=\"text\"\r\n                  placeholder=\"Digite sua matricula\"\r\n                  v-model=\"form.matricula\"\r\n                ></b-form-input>\r\n              </b-form-group>\r\n   \r\n              <b-form-group label-for=\"senha\">\r\n                <label class=\"d-flex justify-content-between\">\r\n                  Senha\r\n                  <small><a href=\"#\">Esqueceu sua senha?</a></small>\r\n                </label>\r\n   \r\n                <b-form-input\r\n                  id=\"senha\"\r\n                  type=\"password\"\r\n                  placeholder=\"Digite sua senha\"\r\n                  v-model=\"form.senha\"\r\n                ></b-form-input>\r\n              </b-form-group>\r\n   \r\n              <b-button\r\n                type=\"button\"\r\n                variant=\"primary\"\r\n                block\r\n                @click=\"login()\"\r\n                width=\"100px\">\r\n                <i class=\"fas fa-sign-in-alt\"></i>\r\n                 Entrar\r\n              </b-button>\r\n\r\n              <my-modal \r\n                  id=\"myModal\" \r\n                  title=\"Confirmation\" \r\n                  :message=\"modalMessage\" \r\n                  :visible=\"modalIsVisible\" \r\n                  @update:visible=\"modalIsVisible = $event\" \r\n                  @on-close-modal=\"handleCloseModal()\"\r\n                  @on-accept-modal=\"handleAcceptModal()\"\r\n                  @on-reject-modal=\"handleRejectModal()\"/>\r\n   \r\n              <hr>\r\n          </b-form>\r\n        </div>\r\n      </b-col>\r\n      \r\n\r\n      <!-- COLUNA SEGUNDA-->\r\n      <b-col sm=\"7\">\r\n          <b-col sm=\"7\" class=\"d-flex justify-content-center align-items-center\">\r\n            <img src=\"https://raw.githubusercontent.com/paulovfppiox/policiamento-assets/main/banner-login.jpg\" class=\"img-login\" />\r\n          </b-col>\r\n      </b-col>\r\n    </b-row>\r\n</main>\r\n  </template>\r\n   \r\n  <script>\r\n  import axios from 'axios';\r\n  import MyModal from '@/components/MyModal.vue';\r\n  \r\n  export default {\r\n    components: {\r\n      MyModal\r\n    },\r\n    name: 'AppLogin',\r\n    data() {\r\n      return {\r\n        modalIsVisible: false,\r\n        modalMessage: \"Confirma operação?\",\r\n        usersDB: [],\r\n        isPrimeiroAcesso: true,\r\n        form: {\r\n          matricula: \"\",\r\n          senha: \"\"\r\n        },\r\n        novaSenha: 0,\r\n      }\r\n    },\r\n   \r\n    methods:      { \r\n      onModalClose()  {\r\n        this.modalSenhaVisible = false;\r\n      },\r\n      handleCloseModal()  {\r\n          // console.log(\"Close ... \");\r\n          this.modalIsVisible = false;\r\n          this.modalMessage = \"x\";\r\n      },\r\n      handleAcceptModal() {\r\n          // console.log(\"Accept ... \");\r\n          this.modalIsVisible = false;\r\n          this.modalMessage = \"y\";\r\n      },\r\n      handleRejectModal() {\r\n          // console.log(\"Reject ... \");\r\n          this.modalIsVisible = false;\r\n          this.modalMessage = \"d\";\r\n      },\r\n      login()   {\r\n        // console.log( 'login !!!' );\r\n        \r\n        var mat = this.form.matricula;\r\n        var senha = this.form.senha;\r\n        // console.log( mat + senha );\r\n        \r\n        var sendData = {\r\n          dados: {\r\n              entidade: 'usuario',\r\n              operacao: 'login',\r\n              objeto: {\r\n                matricula: mat,\r\n                cpf: senha\r\n              }\r\n          }\r\n       };  \r\n\r\n       \r\n       console.log( \"SEND Login request ||\" + JSON.stringify( sendData ) );\r\n\r\n        axios.post( this.$SERVICES_ENDPOINT_URL , sendData )\r\n              .then( response => {\r\n                     console.log('-Response DATA == ' + JSON.stringify(  response.data ) + typeof response.data );\r\n\r\n                     if ( ( typeof response.data ) == 'object' )  \r\n                     {\r\n                          var data = response.data;\r\n                          /* console.log('-DATA == ' + JSON.stringify(  data )  );\r\n                          /* console.log( \"MSG = \" + data.message + \"|| code= \" + data.code );*/\r\n                          if ( data.code == 0 ) \r\n                          {\r\n                              console.log(\"Nome = \" + data.data.nome );\r\n                              const nameParts = data.data.nome.split(' ');\r\n                              const firstName = nameParts[0];\r\n                              const lastName = nameParts[1];\r\n                              var userObj = {\r\n                                  nome:firstName,\r\n                                  sobrenome:lastName,\r\n                                  matricula:data.data.matricula,\r\n                                  cpf: null,\r\n                              }\r\n                              this.$store.commit('setUser', userObj );\r\n                              this.$router.push('/home');\r\n\r\n                          } else \r\n                          {\r\n                            console.log( \"MSG = \" + data.message );\r\n                            this.modalIsVisible = true;\r\n                            this.modalMessage = response.data.message;\r\n                          } \r\n                    }\r\n                    console.log('code:', response.data.code) ;\r\n\r\n              })\r\n              .catch(error => {\r\n                    this.error = error.message;\r\n              });\r\n\r\n        /* fetch('https://raw.githubusercontent.com/paulovfppiox/policiamento-assets/main/users.json')\r\n        .then(response => response.json())\r\n        .then(json => {\r\n            this.usersDB = json;\r\n            console.log( mat + \" ---- \" + senha );\r\n\r\n            var obj1 = {matricula: mat, senha: senha}\r\n            this.usersDB.push(obj1);\r\n            var x = this.usersDB.indexOf(obj1);\r\n            console.log( x );\r\n\r\n        });*/\r\n        \r\n        \r\n        // Aplica DELAY\r\n        /* var tempo = 0;\r\n        setTimeout(() => {\r\n            this.$router.push('/home');\r\n            console.log( tempo++ );\r\n        }, 5000);*/\r\n        \r\n    },\r\n      \r\n      register() {\r\n        console.log('registrar!!!');\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n   \r\n  <style>\r\n   \r\n  *, /*resetar o estilo da página*/\r\n  *::after,\r\n  *::before {\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n    text-decoration: none;\r\n  }\r\n   \r\n  .row-login {\r\n    margin-left: 0;\r\n  }\r\n   \r\n  .left-login {\r\n    background-color: #F2F2F2;\r\n  }\r\n   \r\n  .title-login {\r\n    font-weight: bold;\r\n  }\r\n  .form-group {\r\n    margin-top:15px;\r\n    margin-bottom:15px;\r\n  }\r\n  .img-login  {\r\n    width: 250%;\r\n    height: calc(100vh - 120px);\r\n    margin-inline-start: 320px;\r\n    filter: blur(0.5px);\r\n    -webkit-filter: blur(0.5px);\r\n    opacity: 0.3;\r\n  }\r\n  </style>\r\n\r\n"],"mappings":";AAuEA,OAAAA,KAAA;AACA,OAAAC,OAAA;AAEA;EACAC,UAAA;IACAD;EACA;EACAE,IAAA;EACAC,KAAA;IACA;MACAC,cAAA;MACAC,YAAA;MACAC,OAAA;MACAC,gBAAA;MACAC,IAAA;QACAC,SAAA;QACAC,KAAA;MACA;MACAC,SAAA;IACA;EACA;EAEAC,OAAA;IACAC,aAAA;MACA,KAAAC,iBAAA;IACA;IACAC,iBAAA;MACA;MACA,KAAAX,cAAA;MACA,KAAAC,YAAA;IACA;IACAW,kBAAA;MACA;MACA,KAAAZ,cAAA;MACA,KAAAC,YAAA;IACA;IACAY,kBAAA;MACA;MACA,KAAAb,cAAA;MACA,KAAAC,YAAA;IACA;IACAa,MAAA;MACA;;MAEA,IAAAC,GAAA,QAAAX,IAAA,CAAAC,SAAA;MACA,IAAAC,KAAA,QAAAF,IAAA,CAAAE,KAAA;MACA;;MAEA,IAAAU,QAAA;QACAC,KAAA;UACAC,QAAA;UACAC,QAAA;UACAC,MAAA;YACAf,SAAA,EAAAU,GAAA;YACAM,GAAA,EAAAf;UACA;QACA;MACA;MAGAgB,OAAA,CAAAC,GAAA,2BAAAC,IAAA,CAAAC,SAAA,CAAAT,QAAA;MAEArB,KAAA,CAAA+B,IAAA,MAAAC,sBAAA,EAAAX,QAAA,EACAY,IAAA,CAAAC,QAAA;QACAP,OAAA,CAAAC,GAAA,wBAAAC,IAAA,CAAAC,SAAA,CAAAI,QAAA,CAAA9B,IAAA,WAAA8B,QAAA,CAAA9B,IAAA;QAEA,WAAA8B,QAAA,CAAA9B,IAAA,cACA;UACA,IAAAA,IAAA,GAAA8B,QAAA,CAAA9B,IAAA;UACA;AACA;UACA,IAAAA,IAAA,CAAA+B,IAAA,OACA;YACAR,OAAA,CAAAC,GAAA,aAAAxB,IAAA,CAAAA,IAAA,CAAAgC,IAAA;YACA,MAAAC,SAAA,GAAAjC,IAAA,CAAAA,IAAA,CAAAgC,IAAA,CAAAE,KAAA;YACA,MAAAC,SAAA,GAAAF,SAAA;YACA,MAAAG,QAAA,GAAAH,SAAA;YACA,IAAAI,OAAA;cACAL,IAAA,EAAAG,SAAA;cACAG,SAAA,EAAAF,QAAA;cACA9B,SAAA,EAAAN,IAAA,CAAAA,IAAA,CAAAM,SAAA;cACAgB,GAAA;YACA;YACA,KAAAiB,MAAA,CAAAC,MAAA,YAAAH,OAAA;YACA,KAAAI,OAAA,CAAAC,IAAA;UAEA,OACA;YACAnB,OAAA,CAAAC,GAAA,YAAAxB,IAAA,CAAA2C,OAAA;YACA,KAAA1C,cAAA;YACA,KAAAC,YAAA,GAAA4B,QAAA,CAAA9B,IAAA,CAAA2C,OAAA;UACA;QACA;QACApB,OAAA,CAAAC,GAAA,UAAAM,QAAA,CAAA9B,IAAA,CAAA+B,IAAA;MAEA,GACAa,KAAA,CAAAC,KAAA;QACA,KAAAA,KAAA,GAAAA,KAAA,CAAAF,OAAA;MACA;;MAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;MAKA;MACA;AACA;AACA;AACA;AACA;IAEA;;IAEAG,SAAA;MACAvB,OAAA,CAAAC,GAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}